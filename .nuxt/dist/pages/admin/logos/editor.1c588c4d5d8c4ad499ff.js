webpackJsonp([17],{"/lXD":function(e,r,t){"use strict";var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"admin-editor"},[t("el-form",{ref:"form",attrs:{rules:e.rules,model:e.form,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"机构名称",prop:"name"}},[t("el-input",{model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"链接地址",prop:"link"}},[t("el-input",{model:{value:e.form.link,callback:function(r){e.$set(e.form,"link",r)},expression:"form.link"}})],1),t("el-form-item",{attrs:{label:"缩略图",prop:"thumb"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/upload/thumb","show-file-list":!1,"on-success":e.handleAvatarSuccess,"on-error":e.handleAvatarError,"before-upload":e.beforeAvatarUpload}},[e.form.imgPath?t("img",{staticClass:"avatar",attrs:{src:e.form.imgPath}}):t("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t("div",{staticClass:"info"},[e._v("为保证前端样式统一，请上传图片尺寸226x92的图片")])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.onSubmit("form")}}},[e._v("立即提交")]),t("el-button",{on:{click:e.onCancel}},[e._v("取消")])],1)],1)],1)};a._withStripped=!0;var n={render:a,staticRenderFns:[]};r.a=n},"43KM":function(e,r,t){"use strict";var a=t("woOf"),n=t.n(a),s=t("Xxa5"),o=t.n(s),i=t("exGp"),u=t.n(i);r.a={layout:"admin",middleware:"auth",methods:{onSubmit:function(e){var r=this;this.$refs[e].validate(function(){var e=u()(o.a.mark(function e(t){var a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=14;break}if(a=void 0,!r.$route.query.id){e.next=8;break}return e.next=5,r.$store.dispatch("logo/PATCH_LOGO",r.form);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,r.$store.dispatch("logo/POST_LOGO",r.form);case 10:a=e.sent;case 11:a.success?(r.$message({message:"提交成功",type:"success"}),r.$router.push("/admin/logos")):r.$message.error(a.message),e.next=16;break;case 14:return r.$message.error("提交失败"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,r)}));return function(r){return e.apply(this,arguments)}}())},onCancel:function(){this.$router.push("/admin/logos")},handleAvatarSuccess:function(e,r){this.form.imgPath=e.data.url},handleAvatarError:function(e){console.log(e)},beforeAvatarUpload:function(e){var r="image/jpg"===e.type,t="image/jpeg"===e.type,a="image/png"===e.type,n=e.size/1024/1024<2,s=!1;return r||t||a?s=!0:this.$message.error("缩略图只能是 JPG或PNG 格式!"),n||this.$message.error("缩略图片大小不能超过 2MB!"),s&&n}},data:function(){return{form:{link:"",imgPath:"",name:""},rules:{link:[{required:!0,message:"请输入链接地址",trigger:"blur"}],name:[{required:!0,message:"请输入机构名称",trigger:"blur"}],imgPath:[{required:!0,message:"请上传缩略图",trigger:"blur"}]}}},mounted:function(){var e=u()(o.a.mark(function e(){var r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.$route.query.id){e.next=5;break}return e.next=3,this.$store.dispatch("logo/GET_LOGO",this.$route.query.id);case 3:r=e.sent,n()(this.form,r.data);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},BPdh:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("43KM"),n=t("/lXD"),s=t("VU/8")(a.a,n.a,!1,null,null,null);s.options.__file="pages/admin/logos/editor.vue",r.default=s.exports}});